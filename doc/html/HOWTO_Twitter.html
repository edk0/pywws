<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>
      pywws: HOWTO Twitter
    </title>
  </head>
  <body>
    <h1>
      <a href="index.html">Python software for USB Wireless WeatherStations</a>
    </h1>
    <h2>
      How to configure pywws to post messages to Twitter.
    </h2>
    <h3>
      1. Install dependencies.
    </h3>
    <ul>
      <li>
        Python 2.5+ - <a href="http://python.org/">http://python.org/</a>
      </li>
      <li>
        tweepy - <a href="http://code.google.com/p/tweepy/">http://code.google.com/p/tweepy/</a>
      </li>
      <li>
        simplejson - <a href="http://pypi.python.org/pypi/simplejson/">http://pypi.python.org/pypi/simplejson/</a>
      </li>
    </ul>
    <p>
      Note that simplejson is included in Python 2.6+
    </p>
    <h3>
      2. Create a Twitter account.
    </h3>
    <p>
      You could post weather updates to your 'normal' Twitter account, but I think it's better to have a separate account just for weather reports. This could be useful to someone who lives in your area, but doesn't want to know what you had for breakfast.
    </p>
    <h3>
      3. Authorize pywws to post to your Twitter account.
    </h3>
    <p>
      Make sure no other pywws software is running, then run the TwitterAuth.py program:
    </p>
<pre>
python TwitterAuth.py /data/weather
</pre>
    <p>
      (Replace <code>/data/weather</code> with your data directory.)
    </p>
    <p>
      This will open a web browser window (or give you a URL to copy to your web browser) where you can log in to your Twitter account and authorise pywws to post. Your web browser will then show a 7 digit number which you need to copy to the TwitterAuth.py program. If successful, your weather.ini file will now have a [twitter] section with 'secret' and 'key' entries. (Don't disclose these to anyone else.)
    </p>
    <h3>
      4. Add location data (optional).
    </h3>
    <p>
      Edit your weather.ini file and add 'latitude' and 'longitude' entries to the [twitter] section. For example:
    </p>
<pre>
[twitter]
secret = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
key = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
latitude = 51.501
longitude = -0.142
</pre>
    <h3>
      5. Create a template.
    </h3>
    <p>
      Twitter messages are generated using a template, just like creating files to upload to a website. Copy the example template 'tweet.txt' to your template directory, then test it:
    </p>
<pre>
python pywws/Template.py /data/weather ~/weather/templates/tweet.txt tweet.txt
cat tweet.txt
</pre>
    <p>
      (Replace <code>/data/weather</code> and <code>~/weather/templates</code> with your data and template directories.) If you need to change the template (e.g. to change the units or language used) you can edit it now or later.
    </p>
    <h3>
      6. Post your first weather Tweet.
    </h3>
    <p>
      Run the following command:
    </p>
<pre>
python pywws/ToTwitter.py /data/weather tweet.txt
</pre>
    <p>
      If this has worked, your new Twitter account will have posted its first message. (You should delete the tweet.txt file now.)
    </p>
    <h3>
      7. Add Twitter updates to your hourly tasks.
    </h3>
    <p>
      Edit your weather.ini file and edit the [hourly] section. For example:
    </p>
<pre>
[hourly]
underground = False
twitter = ['tweet.txt']
plot = ['7days.png.xml', '24hrs.png.xml', 'rose_12hrs.png.xml']
text = ['24hrs.txt', '6hrs.txt', '7days.txt', 'allmonths.txt ']
</pre>
    <p>
      You could change the [live], [12 hourly] or [daily] sections instead, but I think [hourly] is most appropriate for Twitter updates.
    </p>
    <p>
      Comments or questions? Please subscribe to the pywws mailing list <a href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.
    </p>
    <hr>
    <p>
      <a href="http://code.google.com/p/pywws/"><i>Python software for USB Wireless WeatherStations</i></a> &copy; <a href="http://www.jim-easterbrook.me.uk/">Jim Easterbrook</a>.
    </p>
  </body>
</html>

