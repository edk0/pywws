<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>
      Software for WeatherStations: weather.ini
    </title>
  </head>
  <body>
    <h1>
      <a href="index.html">Python software for USB Wireless WeatherStations</a>
    </h1>
    <h2>
      weather.ini &mdash; configuration file format
    </h2>
    <p>
      Nearly all configuration of <code>pywws</code> is via a single file in the data directory: <code>weather.ini</code>. This file has a structure similar to that of Microsoft Windows INI files. It is divided into "sections", each of which has a number of "name = value" entries. The order in which sections appear is not important.
    </p>
    <p>
      Some entries in the file are set by <code>pywws</code>, while others need to be edited by the user. Any plain text editor can be used to do this. (Don't try to edit the file while any other <code>pywws</code> software is running.) In many cases <code>pywws</code> will initialise the entries to sensible values.
    </p>
    <p>
      <a name="list"></a>The following sections are currently in use:
    </p>
    <ul>
      <li>
        <a href="#config">config</a>: miscellaneous system configuration.
      </li>
      <li>
        <a href="#paths">paths</a>: directories in which templates etc. are stored.
      </li>
      <li>
        <a href="#fixed">fixed</a>: values copied from the weather station's "fixed block".
      </li>
      <li>
        <a href="#live">live</a>: tasks to be done every 48 seconds.
      </li>
      <li>
        <a href="#hourly">hourly</a>: tasks to be done every hour.
      </li>
      <li>
        <a href="#12hourly">12 hourly</a>: tasks to be done every 12 hours.
      </li>
      <li>
        <a href="#daily">daily</a>: tasks to be done every day.
      </li>
      <li>
        <a href="#ftp">ftp</a>: configuration of uploading to a website.
      </li>
      <li>
        <a href="#twitter">twitter</a>: configuration of posting to Twitter.
      </li>
      <li>
        <a href="#underground">underground</a>: configuration of posting to Weather Underground.
      </li>
    </ul>
    <h3>
      <a href="#list" name="config">config</a>: miscellaneous system configuration
    </h3>
<pre>
[config]
day end hour = 21
gnuplot encoding = iso_8859_1
</pre>
    <p>
      <code>day end hour</code> is the end of the <a href="http://en.wikipedia.org/wiki/Meteorological_day">"meteorological day"</a>, in local time without daylight savings time. Typical values are 21, 9, or 24.
    </p>
    <p>
      <code>gnuplot encoding</code> is the text encoding used when plotting graphs. The default value of <code>iso_8859_1</code> allows the degree symbol, which is useful in a weather application! Other values might be needed if your language includes accented characters. The possible values depend on your gnuplot installation so some experimentation may be needed.
    </p>
    <h3>
      <a href="#list" name="paths">paths</a>: directories in which templates etc. are stored
    </h3>
<pre>
[paths]
templates = /home/$USER/weather/templates/
graph_templates = /home/$USER/weather/graph_templates/
work = /tmp/weather
</pre>
    <p>
      These three entries specify where your text templates and graph templates are stored, and where temporary files should be created.
    </p>
    <h3>
      <a href="#list" name="fixed">fixed</a>: values copied from the weather station's "fixed block"
    </h3>
<pre>
[fixed]
pressure offset = 7.4
</pre>
    <p>
      This section is written by the <code>pywws</code> and should not be edited.
    </p>
    <h3>
      <a href="#list" name="live">live</a>: tasks to be done every 48 seconds
    </h3>
<pre>
[live]
underground = True
twitter = []
text = []
plot = []
</pre>
    <p>
      This section specifies tasks that are to be carried out for every data sample during 'live logging', i.e. every 48 seconds. It is unlikely that you'd want to do anything other than upload to Weather Underground this often.
    </p>
    <p>
      <code>underground</code> enables 'rapid fire' updates to Weather Underground. Valid values are <code>True</code> and <code>False</code>.
    </p>
    <p>
      <code>twitter</code> is a list of text templates to be processed and posted to Twitter.
    </p>
    <p>
      <code>text</code> and <code>plot</code> are lists of text and plot templates to be processed and uploaded to your website.
    </p>
    <h3>
      <a href="#list" name="hourly">hourly</a>: tasks to be done every hour
    </h3>
<pre>
[hourly]
underground = False
twitter = ['tweet.txt']
text = ['24hrs.txt', '6hrs.txt', '7days.txt', 'feed_hourly.xml', 'allmonths.txt']
plot = ['7days.png.xml', '24hrs.png.xml', 'rose_12hrs.png.xml']
</pre>
    <p>
      This section specifies tasks that are to be carried out every hour when 'live logging' or running an hourly cron job.
    </p>
    <p>
      <code>underground</code> enables uploads to Weather Underground. All logged data since the last upload is uploaded (up to a maximum of 7 days worth). Valid values are <code>True</code> and <code>False</code>.
    </p>
    <p>
      <code>twitter</code> is a list of text templates to be processed and posted to Twitter.
    </p>
    <p>
      <code>text</code> and <code>plot</code> are lists of text and plot templates to be processed and uploaded to your website.
    </p>
    <h3>
      <a href="#list" name="12hourly">12 hourly</a>: tasks to be done every 12 hours
    </h3>
<pre>
[12 hourly]
underground = False
twitter = []
text = []
plot = []
</pre>
    <p>
      This section specifies tasks that are to be carried out every 12 hours when 'live logging' or running an hourly cron job. Use it for things that don't change very often, such as monthly graphs.
    </p>
    <p>
      <code>underground</code> enables uploads to Weather Underground. All logged data since the last upload is uploaded (up to a maximum of 7 days worth). Valid values are <code>True</code> and <code>False</code>.
    </p>
    <p>
      <code>twitter</code> is a list of text templates to be processed and posted to Twitter.
    </p>
    <p>
      <code>text</code> and <code>plot</code> are lists of text and plot templates to be processed and uploaded to your website.
    </p>
    <h3>
      <a href="#list" name="daily">daily</a>: tasks to be done every 24 hours
    </h3>
<pre>
[daily]
underground = False
twitter = []
text = ['feed_daily.xml']
plot = ['2008.png.xml', '2009.png.xml', '2010.png.xml', '28days.png.xml']
</pre>
    <p>
      This section specifies tasks that are to be carried out every hour when 'live logging' or running an hourly cron job. Use it for things that don't change very often, such as monthly graphs.
    </p>
    <p>
      <code>underground</code> enables uploads to Weather Underground. All logged data since the last upload is uploaded (up to a maximum of 7 days worth). Valid values are <code>True</code> and <code>False</code>.
    </p>
    <p>
      <code>twitter</code> is a list of text templates to be processed and posted to Twitter.
    </p>
    <p>
      <code>text</code> and <code>plot</code> are lists of text and plot templates to be processed and uploaded to your website.
    </p>
    <h3>
      <a href="#list" name="ftp">ftp</a>: configuration of uploading to a website
    </h3>
<pre>
[ftp]
local site = False
secure = False
site = ftp.your_isp.co.uk
user = username
password = userpassword
directory = public_html/weather/data/
</pre>
    <p>
      These entries provide details of your website (or local directory) where processed text files and graph images should be transferred to.
    </p>
    <p>
      <code>local site</code> specifies whether the files should be copied to a local directory or sent to a remote site. You may want to set this if you run your web server on the same machine as you are running <code>pywws</code> on.
    </p>
    <p>
      <code>secure</code> specifies whether to transfer files using SFTP (secure FTP) instead of the more common FTP. Your web site provider should be able to tell you if you can use SFTP.
    </p>
    <p>
      <code>site</code> is the web address of the FTP site to transfer files to.
    </p>
    <p>
      <code>user</code>, and <code>password</code> are the FTP site login details. Your web site provider should have provided them to you.
    </p>
    <p>
      <code>directory</code> specifies where on the FTP site (or local file system) the files should be stored. Note that you may have to experiment with this a bit - you might need a '/' character at the start of the address.
    </p>
    <h3>
      <a href="#list" name="twitter">twitter</a>: configuration of posting to Twitter
    </h3>
<pre>
[twitter]
secret = longstringofrandomcharacters
key = evenlongerstringofrandomcharacters
latitude = 51.365
longitude = -0.251
</pre>
    <p>
      <code>secret</code> and <code>key</code> are authentication data provided by Twitter. To set them, run the <code>TwitterAuth.py</code> program.
    </p>
    <p>
      <code>latitude</code> and <code>longitude</code> are optional location data. If you include them then your weather station tweets will have location information so users can see where your weather station is. It might also enable people to find your weather station tweets if they search by location.
    </p>
    <h3>
      <a href="#list" name="underground">underground</a>: configuration of posting to Weather Underground
    </h3>
<pre>
[underground]
station = IXYZABA5
password = secret
last update = 2010-09-27 19:45:24
</pre>
    <p>
      <code>station</code> is the PWS ID allocated to your weather station by Weather Underground.
    </p>
    <p>
      <code>password</code> is your Weather Underground password.
    </p>
    <p>
      <code>last update</code> is set by <code>pywws</code> when you upload to Weather Underground.
    </p>
    <hr>
    <p>
      <a href="http://code.google.com/p/pywws/"><i>Python software for USB Wireless WeatherStations</i></a> &copy; <a href="http://www.jim-easterbrook.me.uk/">Jim Easterbrook</a>.
    </p>
  </body>
</html>

